# Claude Code Moods (Thinking Verbs)

Lista completa de los estados/moods que Claude Code muestra mientras trabaja.

> **Fuente oficial:** Pallav Agarwal (Anthropic) + código fuente Claude Code
> **Total:** 90 verbos documentados

---

## Tabla Completa de Moods

### Lista Oficial (56 verbos)

| # | Mood | Traduccion | Categoria |
|---|------|------------|-----------|
| 1 | Accomplishing... | Logrando | Accion |
| 2 | Actioning... | Accionando | Accion |
| 3 | Actualizing... | Actualizando | Accion |
| 4 | Baking... | Horneando | Cocina |
| 5 | Brewing... | Preparando | Cocina |
| 6 | Calculating... | Calculando | Tecnico |
| 7 | Cerebrating... | Cerebrando | Pensamiento |
| 8 | Churning... | Batiendo | Cocina |
| 9 | **Clauding...** | Claudeando | Especial |
| 10 | Coalescing... | Fusionando | Abstracto |
| 11 | Cogitating... | Cogitando | Pensamiento |
| 12 | Computing... | Computando | Tecnico |
| 13 | Conjuring... | Conjurando | Abstracto |
| 14 | Considering... | Considerando | Pensamiento |
| 15 | Cooking... | Cocinando | Cocina |
| 16 | Crafting... | Elaborando | Creacion |
| 17 | Creating... | Creando | Creacion |
| 18 | Crunching... | Procesando | Tecnico |
| 19 | Deliberating... | Deliberando | Pensamiento |
| 20 | Determining... | Determinando | Pensamiento |
| 21 | Doing... | Haciendo | Accion |
| 22 | Effecting... | Efectuando | Accion |
| 23 | Finagling... | Maniobrado | Informal |
| 24 | Forging... | Forjando | Creacion |
| 25 | Forming... | Formando | Creacion |
| 26 | Generating... | Generando | Creacion |
| 27 | Hatching... | Incubando | Gestacion |
| 28 | Herding... | Pastoreando | Informal |
| 29 | **Honking...** | Graznando | Informal |
| 30 | Hustling... | Apurando | Informal |
| 31 | Ideating... | Ideando | Pensamiento |
| 32 | Inferring... | Infiriendo | Pensamiento |
| 33 | Manifesting... | Manifestando | Abstracto |
| 34 | Marinating... | Marinando | Cocina |
| 35 | Moseying... | Paseando | Informal |
| 36 | Mulling... | Reflexionando | Pensamiento |
| 37 | Mustering... | Reuniendo | Accion |
| 38 | Musing... | Meditando | Pensamiento |
| 39 | Noodling... | Garabateando | Informal |
| 40 | Percolating... | Filtrando | Cocina |
| 41 | Pondering... | Ponderando | Pensamiento |
| 42 | Processing... | Procesando | Tecnico |
| 43 | Puttering... | Trasteando | Informal |
| 44 | **Reticulating...** | Reticulando | Abstracto |
| 45 | Ruminating... | Rumiando | Pensamiento |
| 46 | Schlepping... | Arrastrando | Informal |
| 47 | Shucking... | Desgranando | Informal |
| 48 | Simmering... | Hirviendo | Cocina |
| 49 | Smooshing... | Aplastando | Informal |
| 50 | Spinning... | Girando | Abstracto |
| 51 | Stewing... | Guisando | Cocina |
| 52 | Synthesizing... | Sintetizando | Tecnico |
| 53 | Thinking... | Pensando | Pensamiento |
| 54 | Transmuting... | Transmutando | Abstracto |
| 55 | **Vibing...** | Vibrando | Especial |
| 56 | Working... | Trabajando | Accion |

### Lista Extendida (34 verbos adicionales - comunidad)

| # | Mood | Traduccion | Categoria |
|---|------|------------|-----------|
| 57 | Booping... | Picoteando | Informal |
| 58 | Channelling... | Canalizando | Abstracto |
| 59 | Combobulating... | Combobulando | Informal |
| 60 | Concocting... | Maquinando | Cocina |
| 61 | Contemplating... | Contemplando | Pensamiento |
| 62 | Deciphering... | Descifrando | Tecnico |
| 63 | Discombobulating... | Descombobulando | Informal |
| 64 | Divining... | Adivinando | Abstracto |
| 65 | Elucidating... | Elucidando | Pensamiento |
| 66 | Enchanting... | Encantando | Abstracto |
| 67 | Envisioning... | Visionando | Pensamiento |
| 68 | Flibbertigibbeting... | Charloteando | Informal |
| 69 | Frolicking... | Retozando | Informal |
| 70 | Germinating... | Germinando | Gestacion |
| 71 | Imagining... | Imaginando | Pensamiento |
| 72 | Incubating... | Incubando | Gestacion |
| 73 | Jiving... | Jiveando | Informal |
| 74 | Meandering... | Serpenteando | Exploracion |
| 75 | Perusing... | Hojeando | Exploracion |
| 76 | Philosophising... | Filosofando | Pensamiento |
| 77 | Pontificating... | Pontificando | Pensamiento |
| 78 | Puzzling... | Acertijando | Pensamiento |
| 79 | Scheming... | Tramando | Pensamiento |
| 80 | Shimmying... | Meneando | Informal |
| 81 | Spelunking... | Espeleando | Exploracion |
| 82 | Sussing... | Detectando | Exploracion |
| 83 | Tinkering... | Cacharreando | Creacion |
| 84 | Unfurling... | Desplegando | Abstracto |
| 85 | Unravelling... | Desenredando | Tecnico |
| 86 | Wandering... | Vagando | Exploracion |
| 87 | Whirring... | Zumbando | Tecnico |
| 88 | **Wibbling...** | Wibbleando | Especial |
| 89 | Wizarding... | Maguificando | Abstracto |
| 90 | Wrangling... | Domando | Accion |

---

## Moods por Contexto de Uso

### Durante operaciones especificas

| Operacion | Moods frecuentes |
|-----------|------------------|
| Lectura de archivos | Reading, Perusing, Spelunking |
| Escritura de codigo | Crafting, Forging, Creating |
| Busqueda/Grep | Exploring, Sussing, Wandering |
| Compilacion | Compiling, Crunching, Processing |
| Instalacion | Installing, Brewing, Cooking |
| Analisis | Analyzing, Pondering, Deliberating |
| Git operations | Cloning, Syncing, Pushing |
| Tests | Validating, Crunching, Processing |

---

## Categorias Completas

| Categoria | Icono | Cantidad | Verbos |
|-----------|-------|----------|--------|
| Pensamiento | brain | 19 | Cerebrating, Cogitating, Considering, Deliberating, Determining, Ideating, Inferring, Mulling, Musing, Pondering, Ruminating, Thinking, Contemplating, Elucidating, Envisioning, Imagining, Philosophising, Pontificating, Puzzling, Scheming |
| Informal | circus | 15 | Finagling, Herding, Honking, Hustling, Moseying, Noodling, Puttering, Schlepping, Shucking, Smooshing, Booping, Combobulating, Discombobulating, Flibbertigibbeting, Frolicking, Jiving, Shimmying |
| Abstracto | sparkles | 12 | Coalescing, Conjuring, Manifesting, Reticulating, Spinning, Transmuting, Channelling, Divining, Enchanting, Unfurling, Wizarding |
| Cocina | cooking | 9 | Baking, Brewing, Churning, Cooking, Marinating, Percolating, Simmering, Stewing, Concocting |
| Accion | target | 8 | Accomplishing, Actioning, Actualizing, Doing, Effecting, Mustering, Working, Wrangling |
| Tecnico | gear | 8 | Calculating, Computing, Crunching, Processing, Synthesizing, Deciphering, Unravelling, Whirring |
| Creacion | hammer | 6 | Crafting, Creating, Forging, Forming, Generating, Tinkering |
| Exploracion | compass | 5 | Meandering, Perusing, Spelunking, Sussing, Wandering |
| Gestacion | egg | 3 | Hatching, Germinating, Incubating |
| Especial | star | 4 | **Clauding**, **Vibing**, **Wibbling**, **Honking** |

---

## Controles de Extended Thinking

| Trigger | Budget (tokens) | Nivel | Uso |
|---------|-----------------|-------|-----|
| `think` | ~4,000 | Bajo | Preguntas simples |
| `think hard` | ~10,000 | Medio | Problemas moderados |
| `megathink` | ~10,000 | Medio | Alias de think hard |
| `think harder` | ~31,999 | Maximo | Problemas complejos |
| `ultrathink` | ~31,999 | Maximo | Alias de think harder |

### Ejemplos de uso

```bash
# Thinking basico
> think about how to optimize this function

# Thinking medio
> think hard about the architecture for this feature

# Thinking maximo
> ultrathink about the edge cases in this algorithm
```

---

## Atajos de Teclado

### Navegacion

| Tecla | Funcion |
|-------|---------|
| `Tab` | Toggle thinking mode on/off |
| `Ctrl+O` | Ver verbose/thinking expandido |
| `Ctrl+T` | Mostrar todos los procesos |
| `Ctrl+C` | Cancelar operacion actual |
| `Esc` | Interrumpir |
| `Esc` x2 | Volver en historial |
| `Up/Down` | Navegar historial de comandos |

### Edicion

| Tecla | Funcion |
|-------|---------|
| `Ctrl+A` | Ir al inicio de linea |
| `Ctrl+E` | Ir al final de linea |
| `Ctrl+W` | Borrar palabra anterior |
| `Ctrl+U` | Borrar linea completa |
| `Ctrl+K` | Borrar hasta el final |

---

## Task States

| Estado | Icono | Significado |
|--------|-------|-------------|
| `Task "..."` | circle | Tarea en ejecucion |
| `completed in background` | check | Tarea completada |
| `Task Output(non-blocking)` | box | Agente paralelo termino |
| `Task Output(blocking)` | clock | Esperando resultado |
| `running` | spinner | Proceso activo |
| `pending` | circle_outline | Pendiente de inicio |

---

## Metricas (Barra Inferior)

```
11m 11s . down 10.8k tokens . thought for 3s
```

| Metrica | Descripcion | Ejemplo |
|---------|-------------|---------|
| Tiempo | Duracion total de sesion | `11m 11s` |
| Tokens | Consumo de tokens (entrada) | `down 10.8k tokens` |
| Thought | Tiempo en modo thinking | `thought for 3s` |
| Cost | Costo estimado (si habilitado) | `$0.23` |

---

## Personalizacion

### tweakcc (herramienta de terceros)

```bash
# Instalar
npm install -g tweakcc

# Agregar verbos custom
tweakcc add-verb "Philosophizing"
tweakcc add-verb "Meditating"

# Cambiar velocidad del spinner
tweakcc spinner-speed fast
```

### Variables de entorno

```bash
# Deshabilitar animaciones (accesibilidad)
export CLAUDE_CODE_NO_ANIMATIONS=1

# Modo silencioso
export CLAUDE_CODE_QUIET=1
```

---

## Easter Eggs

| Mood | Referencia |
|------|------------|
| **Reticulating...** | Referencia a "Reticulating Splines" de SimCity/Maxis |
| **Clauding...** | Auto-referencia a Claude |
| **Honking...** | Posible referencia a Untitled Goose Game |
| **Wibbling...** | Termino britanico informal |
| **Vibing...** | Slang moderno de internet |

---

## Implementacion Tecnica

Claude Code usa:
- **React + Ink**: Libreria React para CLIs
- **Spinner component**: Selecciona verbo aleatorio de la lista
- **Sufijo "..."**: Agregado automaticamente a cada verbo

```javascript
// Pseudocodigo del spinner
const verbs = ['Thinking', 'Pondering', 'Brewing', ...];
const randomVerb = verbs[Math.floor(Math.random() * verbs.length)];
display(`${randomVerb}...`);
```

---

## Agents (Subagents)

Agents son asistentes AI especializados a los que Claude puede delegar tareas. Cada agente opera en su propio contexto separado.

### Caracteristicas

| Aspecto | Descripcion |
|---------|-------------|
| **Contexto separado** | No contamina la conversacion principal |
| **Tools configurables** | Diferentes permisos por agente |
| **System prompt custom** | Instrucciones especializadas |
| **Reutilizable** | Compartir entre proyectos y equipos |

### Agents Built-in

| Agente | Modelo | Tools | Uso |
|--------|--------|-------|-----|
| **General-Purpose** | Sonnet | Todos | Tareas complejas multi-step |
| **Plan** | Sonnet | Read, Glob, Grep, Bash (read-only) | Research en plan mode |
| **Explore** | Haiku | Glob, Grep, Read, Bash (read-only) | Buscar/entender codebase |

#### Explore Agent - Niveles de Thoroughness

| Nivel | Descripcion |
|-------|-------------|
| `quick` | Busquedas basicas |
| `medium` | Exploracion moderada |
| `very thorough` | Analisis comprehensivo |

### Ubicacion de Agents

| Scope | Path | Prioridad |
|-------|------|-----------|
| Project | `.claude/agents/name.md` | Alta |
| CLI | `--agents '{...}'` | Media |
| User | `~/.claude/agents/name.md` | Baja |
| Plugin | `agents/` en plugin | Baja |

### Crear Agent con /agents

```bash
/agents
# Seleccionar "Create New Agent"
# Elegir project o user level
# Definir cuando usarlo
# Seleccionar tools
# Editar system prompt
```

### AGENT.md Format

```markdown
---
name: agent-name
description: When this agent should be invoked
tools: Read, Grep, Glob, Bash
model: sonnet
permissionMode: default
skills: skill1, skill2
---

Your agent's system prompt goes here.

Include specific instructions, best practices,
and constraints the agent should follow.
```

### Frontmatter Options

| Campo | Requerido | Descripcion |
|-------|-----------|-------------|
| `name` | Si | Identificador unico (lowercase, hyphens) |
| `description` | Si | Cuando/por que usar el agente |
| `tools` | No | Tools permitidos (hereda todos si omite) |
| `model` | No | `sonnet`, `opus`, `haiku`, `inherit` |
| `permissionMode` | No | `default`, `acceptEdits`, `bypassPermissions`, `plan` |
| `skills` | No | Skills a cargar automaticamente |

### Tool Combinations Comunes

| Caso de Uso | Tools |
|-------------|-------|
| Read-only analysis | Read, Grep, Glob |
| Test execution | Bash, Read, Grep |
| Code modification | Read, Edit, Write, Grep, Glob |
| Full access | (omitir tools field) |

### Permission Modes

| Mode | Comportamiento |
|------|----------------|
| `default` | Verificaciones normales |
| `acceptEdits` | Auto-aprobar ediciones |
| `bypassPermissions` | Auto-aprobar TODO |
| `plan` | Read-only, presenta plan |

### Agent via CLI

```bash
claude --agents '{
  "code-reviewer": {
    "description": "Expert code reviewer. Use after code changes.",
    "prompt": "You are a senior code reviewer...",
    "tools": ["Read", "Grep", "Glob", "Bash"],
    "model": "sonnet"
  }
}'
```

### Ejemplo: Code Reviewer

**.claude/agents/code-reviewer.md:**
```markdown
---
name: code-reviewer
description: Expert code review specialist. Use immediately after writing or modifying code.
tools: Read, Grep, Glob, Bash
model: inherit
---

You are a senior code reviewer.

When invoked:
1. Run git diff to see recent changes
2. Focus on modified files
3. Begin review immediately

Review checklist:
- Code is clear and readable
- No duplicated code
- Proper error handling
- No exposed secrets
- Good test coverage

Provide feedback by priority:
- Critical (must fix)
- Warnings (should fix)
- Suggestions (consider)
```

### Ejemplo: Debugger

```markdown
---
name: debugger
description: Debugging specialist for errors and test failures. Use when encountering issues.
tools: Read, Edit, Bash, Grep, Glob
model: sonnet
---

You are an expert debugger.

When invoked:
1. Capture error message and stack trace
2. Identify reproduction steps
3. Isolate failure location
4. Implement minimal fix
5. Verify solution works

Debugging process:
- Analyze error messages
- Check recent code changes
- Form and test hypotheses
- Add strategic debug logging

For each issue provide:
- Root cause explanation
- Specific code fix
- Testing approach
- Prevention recommendations
```

### Ejemplo: Data Scientist

```markdown
---
name: data-scientist
description: Data analysis expert for SQL and BigQuery. Use for data analysis tasks.
tools: Bash, Read, Write
model: sonnet
---

You are a data scientist specializing in SQL and BigQuery.

When invoked:
1. Understand data analysis requirement
2. Write efficient SQL queries
3. Use bq command line when appropriate
4. Analyze and summarize results

Key practices:
- Write optimized SQL with proper filters
- Use appropriate aggregations and joins
- Include comments for complex logic
- Format results for readability

For each analysis:
- Explain query approach
- Document assumptions
- Highlight key findings
- Suggest next steps
```

### Task Tool

El Task tool invoca agentes. Debe incluirse en `allowedTools`:

```python
# Python SDK
from claude_agent_sdk import query, ClaudeAgentOptions, AgentDefinition

async for message in query(
    prompt="Use code-reviewer agent",
    options=ClaudeAgentOptions(
        allowed_tools=["Read", "Glob", "Grep", "Task"],  # Task requerido!
        agents={
            "code-reviewer": AgentDefinition(
                description="Expert code reviewer",
                prompt="Analyze code quality...",
                tools=["Read", "Glob", "Grep"]
            )
        }
    )
):
    print(message)
```

```typescript
// TypeScript SDK
import { query } from "@anthropic-ai/claude-agent-sdk";

for await (const message of query({
  prompt: "Use code-reviewer agent",
  options: {
    allowedTools: ["Read", "Glob", "Grep", "Task"],
    agents: {
      "code-reviewer": {
        description: "Expert code reviewer",
        prompt: "Analyze code quality...",
        tools: ["Read", "Glob", "Grep"]
      }
    }
  }
})) {
  console.log(message);
}
```

### Invocacion de Agents

**Automatica:**
```
"Find all places where we handle authentication"
→ Claude puede invocar code-analyzer agent
```

**Explicita:**
```
"Use the code-reviewer agent to check my changes"
→ Invoca el agente nombrado
```

### Paralelizacion

Multiples agentes pueden correr concurrentemente:

```python
agents={
    "style-checker": AgentDefinition(...),
    "security-scanner": AgentDefinition(...),
    "test-coverage": AgentDefinition(...)
}

# Main agent puede invocar todos simultaneamente
```

### Session Management

```python
# Capturar session ID
session_id = message.session_id

# Resumir con contexto completo
async for message in query(
    prompt="Continue analyzing...",
    options=ClaudeAgentOptions(resume=session_id)
):
    print(message)

# Fork para explorar diferentes enfoques
async for message in query(
    prompt="Try different approach",
    options=ClaudeAgentOptions(resume=session_id, fork=True)
):
    print(message)
```

### Detectar Invocacion de Subagent

```typescript
// Detectar uso de Task tool
if (block.type === "tool_use" && block.name === "Task") {
  console.log(`Subagent: ${block.input.subagent_type}`);
}

// Detectar mensajes de subagent
if (message.parent_tool_use_id) {
  console.log("Message from subagent context");
}
```

### Best Practices

| Practica | Descripcion |
|----------|-------------|
| Empezar con /agents | Dejar que Claude sugiera agente |
| Un proposito | Responsabilidad clara por agente |
| Prompts detallados | Instrucciones especificas |
| Limitar tools | Solo dar tools necesarios |
| Version control | Commit agents en git |
| Descriptions explicitas | "use PROACTIVELY" para auto-delegacion |
| Probar chains | Verificar delegacion correcta |

### MCP Tools en Agents

```markdown
---
name: github-agent
description: GitHub operations specialist
tools: Read, Grep, mcp__github__list_prs, mcp__github__create_issue
---
```

Si omites `tools`, hereda MCP tools del thread principal.

### Quick Reference

```bash
# Crear agente
/agents

# Ubicaciones
.claude/agents/name.md      # Project
~/.claude/agents/name.md    # User

# CLI
claude --agents '{"name": {...}}'

# Frontmatter
---
name: agent-name
description: when to use
tools: Read, Grep, Glob
model: sonnet
permissionMode: default
skills: skill1, skill2
---

# Invocar explicitamente
"Use the code-reviewer agent to..."

# Task tool requerido para SDK
allowed_tools=["Task", ...]
```

---

## Skills (Agent Skills)

Skills son archivos markdown que ensenan a Claude como hacer algo especifico. Claude los invoca automaticamente cuando tu request coincide con su descripcion.

### Caracteristicas

| Aspecto | Descripcion |
|---------|-------------|
| **Model-invoked** | Claude decide cuando usar Skills |
| **Automatico** | No necesitas invocar explicitamente |
| **Context-aware** | Usa similitud semantica para matching |
| **Progressive** | Solo carga name/description al inicio |

### Ubicacion de Skills

| Scope | Path | Aplica a |
|-------|------|----------|
| Enterprise | managed settings | Toda la organizacion |
| Personal | `~/.claude/skills/` | Tu, todos los proyectos |
| Project | `.claude/skills/` | Cualquiera en el repo |
| Plugin | `skills/` en plugin | Quien instale el plugin |

**Precedencia:** Enterprise > Personal > Project > Plugin

### Estructura de Skill

```
my-skill/
├── SKILL.md              # Requerido
├── reference.md          # Documentacion adicional
├── examples.md           # Ejemplos de uso
└── scripts/
    └── helper.py         # Scripts utilitarios
```

### SKILL.md Frontmatter

```yaml
---
name: skill-name
description: What this Skill does and when to use it
allowed-tools: Read, Grep, Glob
model: claude-sonnet-4-20250514
---

# Skill Name

## Instructions
Step-by-step guidance for Claude.

## Examples
Concrete examples of using this Skill.
```

| Campo | Requerido | Descripcion | Max |
|-------|-----------|-------------|-----|
| `name` | Si | Nombre (lowercase, numbers, hyphens) | 64 chars |
| `description` | Si | Que hace y cuando usarlo | 1024 chars |
| `allowed-tools` | No | Tools permitidos sin pedir permiso | - |
| `model` | No | Modelo especifico para este Skill | - |

### Flujo de Activacion

1. **Discovery**: Claude carga solo name/description al inicio
2. **Matching**: Compara tu request con descriptions usando similitud semantica
3. **Confirmation**: Pide permiso antes de usar el Skill
4. **Execution**: Carga SKILL.md completo y sigue instrucciones

### Crear Skill Basico

```bash
# 1. Crear directorio
mkdir -p ~/.claude/skills/commit-helper

# 2. Crear SKILL.md
```

**~/.claude/skills/commit-helper/SKILL.md:**
```yaml
---
name: generating-commit-messages
description: Generates clear commit messages from git diffs. Use when writing commit messages or reviewing staged changes.
---

# Generating Commit Messages

## Instructions

1. Run `git diff --staged` to see changes
2. Suggest a commit message with:
   - Summary under 50 characters
   - Detailed description
   - Affected components

## Best practices

- Use present tense
- Explain what and why, not how
```

```bash
# 3. Reiniciar Claude Code para cargar
# 4. Probar: "help me write a commit message"
```

### Skill con Tool Restrictions

```yaml
---
name: reading-files-safely
description: Read files without making changes. Use when you need read-only access.
allowed-tools: Read, Grep, Glob
---

# Safe File Reader

This Skill provides read-only file access.

## Instructions
1. Use Read to view contents
2. Use Grep to search within files
3. Use Glob to find files by pattern
```

### Skill Multi-Archivo

```
pdf-processing/
├── SKILL.md
├── FORMS.md              # Form field mappings
├── REFERENCE.md          # API documentation
└── scripts/
    ├── fill_form.py
    └── validate.py
```

**SKILL.md:**
```yaml
---
name: pdf-processing
description: Extract text, fill forms, merge PDFs. Use when working with PDF files, forms, or document extraction.
allowed-tools: Read, Bash(python:*)
---

# PDF Processing

## Quick start

```python
import pdfplumber
with pdfplumber.open("doc.pdf") as pdf:
    text = pdf.pages[0].extract_text()
```

For form filling, see [FORMS.md](FORMS.md).
For API reference, see [REFERENCE.md](REFERENCE.md).

## Utility scripts

```bash
python scripts/validate.py input.pdf
```
```

### Skill de Code Review

```
code-review/
├── SKILL.md
├── SECURITY.md
├── PERFORMANCE.md
├── STYLE.md
└── scripts/
    └── run-linters.sh
```

```yaml
---
name: code-review
description: Reviews code for quality, security, and performance. Use when reviewing PRs, checking code quality, or analyzing code.
allowed-tools: Read, Grep, Glob, Bash(npm run lint:*)
---

# Code Review

## Checklist

1. Security - see [SECURITY.md](SECURITY.md)
2. Performance - see [PERFORMANCE.md](PERFORMANCE.md)
3. Style - see [STYLE.md](STYLE.md)

## Linting

```bash
./scripts/run-linters.sh
```
```

### Skill de Explicacion

```yaml
---
name: explaining-code
description: Explains code with visual diagrams and analogies. Use when explaining how code works or when asked "how does this work?"
---

# Explaining Code

When explaining code, always include:

1. **Analogy**: Compare to something from everyday life
2. **Diagram**: Use ASCII art to show flow/structure
3. **Walk-through**: Step-by-step explanation
4. **Gotcha**: Common mistakes or misconceptions

Keep explanations conversational.
```

### Skills vs Slash Commands

| Aspecto | Slash Commands | Skills |
|---------|----------------|--------|
| **Complejidad** | Simple prompts | Capacidades complejas |
| **Estructura** | Un archivo .md | Directorio con recursos |
| **Discovery** | Explicito (`/command`) | Automatico (contexto) |
| **Archivos** | Solo uno | Multiples archivos/scripts |
| **Invocacion** | Tu escribes `/command` | Claude decide cuando |

**Usar Slash Commands cuando:**
- Prompts rapidos y frecuentes
- Cabe en un solo archivo
- Quieres control explicito

**Usar Skills cuando:**
- Multiples archivos/scripts necesarios
- Workflows complejos
- Claude debe descubrir automaticamente
- Estandarizar workflows de equipo

### Skills en Plugins

```
my-plugin/
├── .claude-plugin/
│   └── plugin.json
└── skills/
    ├── code-review/
    │   └── SKILL.md
    └── documentation/
        ├── SKILL.md
        └── style-guide.md
```

### Skills en Subagents

```yaml
# .claude/agents/code-reviewer/AGENT.md
---
name: code-reviewer
description: Review code for quality
skills: pr-review, security-check
---
```

**Nota:** Built-in agents (Explore, Plan) NO tienen acceso a Skills. Solo subagents custom con campo `skills` explicito.

### Best Practices para Descriptions

**Bueno:**
```yaml
description: Extract text, fill forms, merge PDFs. Use when working with PDF files or when the user mentions PDFs, forms, or document extraction.
```

**Malo (muy vago):**
```yaml
description: Helps with documents
```

**La description debe responder:**
1. Que hace este Skill?
2. Cuando debe Claude usarlo?

### Troubleshooting

| Problema | Solucion |
|----------|----------|
| Skill no se activa | Description muy vaga, agregar keywords |
| Skill no carga | Verificar path (case-sensitive) |
| YAML error | Iniciar con `---`, usar espacios no tabs |
| Scripts no funcionan | `chmod +x scripts/*.py` |
| Conflicto de Skills | Hacer descriptions mas especificas |

### Debug Mode

```bash
claude --debug
# Ver que Skills se cargan y matching
```

### Best Practices

| Practica | Descripcion |
|----------|-------------|
| Un proposito | Cada Skill enfocado en una cosa |
| Descriptions claras | Incluir keywords que usuarios dirian |
| Progressive disclosure | SKILL.md < 500 lineas |
| Archivos de soporte | Detalles en archivos separados |
| Testing | Probar con diferentes phrasings |
| Documentar | Incluir setup/dependencies |

### Quick Reference

```bash
# Ubicaciones
~/.claude/skills/name/SKILL.md      # Personal
.claude/skills/name/SKILL.md        # Project
skills/name/SKILL.md                # Plugin

# Frontmatter requerido
---
name: skill-name          # lowercase, hyphens
description: ...          # max 1024 chars
---

# Frontmatter opcional
allowed-tools: Read, Grep
model: claude-sonnet-4-20250514

# Testing
claude --debug

# Team sharing
git add .claude/skills/
git commit -m "Add team skills"
```

---

## Plugins

Plugins extienden Claude Code con funcionalidad custom que puede compartirse entre proyectos y equipos.

### Que incluyen los Plugins

| Componente | Descripcion |
|------------|-------------|
| **Slash commands** | Archivos `.md` en `commands/` |
| **Agents** | Subagentes para tareas especificas |
| **Skills** | Capacidades invocadas por el modelo |
| **Hooks** | Event handlers para automatizacion |
| **MCP servers** | Integraciones de herramientas externas |
| **LSP servers** | Code intelligence y soporte de lenguajes |

### Comandos de Instalacion

```bash
# Interactivo (recomendado)
/plugin

# CLI directo
claude plugin install plugin-name@marketplace-name

# Con scope especifico
claude plugin install plugin-name@marketplace --scope project
claude plugin install plugin-name@marketplace --scope local
claude plugin install plugin-name@marketplace --scope user
```

### Gestion de Plugins

```bash
claude plugin enable plugin-name@marketplace
claude plugin disable plugin-name@marketplace
claude plugin update plugin-name@marketplace
claude plugin uninstall plugin-name@marketplace
claude plugin validate  # Validar JSON
```

### Scopes de Instalacion

| Scope | Archivo | Uso |
|-------|---------|-----|
| `user` | `~/.claude/settings.json` | Personal, todos los proyectos |
| `project` | `.claude/settings.json` | Equipo, version control |
| `local` | `.claude/settings.local.json` | Proyecto, gitignored |
| `managed` | `managed-settings.json` | Enterprise (read-only) |

### Marketplaces

```bash
# Agregar marketplace de GitHub
/plugin marketplace add owner/repo

# Agregar desde Git URL
/plugin marketplace add https://gitlab.com/team/plugins.git

# Agregar local (desarrollo)
/plugin marketplace add ./local-marketplace

# Listar marketplaces
claude plugin marketplace list

# Actualizar todos
claude plugin marketplace update

# Eliminar
claude plugin marketplace remove <name>
```

### Estructura de Plugin

```
my-plugin/
├── .claude-plugin/
│   └── plugin.json          # Manifest (requerido)
├── commands/                 # Slash commands
│   ├── hello.md
│   └── review.md
├── agents/                   # Subagentes
│   └── security-reviewer.md
├── skills/                   # Agent Skills
│   └── code-review/
│       └── SKILL.md
├── hooks/                    # Event handlers
│   └── hooks.json
├── .mcp.json                 # MCP servers
├── .lsp.json                 # LSP servers
├── scripts/                  # Scripts de soporte
└── README.md
```

### Plugin Manifest (plugin.json)

```json
{
  "name": "plugin-name",
  "version": "1.2.0",
  "description": "Brief description",
  "author": {
    "name": "Author Name",
    "email": "author@example.com",
    "url": "https://github.com/author"
  },
  "homepage": "https://docs.example.com/plugin",
  "repository": "https://github.com/author/plugin",
  "license": "MIT",
  "keywords": ["keyword1", "keyword2"],
  "commands": ["./custom/commands/special.md"],
  "agents": "./custom/agents/",
  "skills": "./custom/skills/",
  "hooks": "./config/hooks.json",
  "mcpServers": "./mcp-config.json",
  "lspServers": "./.lsp.json"
}
```

### Crear Plugin Basico

```bash
# 1. Crear directorio
mkdir my-plugin && cd my-plugin

# 2. Crear manifest
mkdir .claude-plugin
```

**.claude-plugin/plugin.json:**
```json
{
  "name": "my-plugin",
  "description": "My first plugin",
  "version": "1.0.0",
  "author": { "name": "Your Name" }
}
```

```bash
# 3. Crear comando
mkdir commands
```

**commands/hello.md:**
```markdown
---
description: Greet the user
---

Greet the user named "$ARGUMENTS" warmly.
```

```bash
# 4. Probar localmente
claude --plugin-dir ./my-plugin

# 5. Usar en Claude Code
/my-plugin:hello World
```

### Plugin con Hooks

**hooks/hooks.json:**
```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/format.sh"
          }
        ]
      }
    ]
  }
}
```

### Plugin con Skills

**skills/review/SKILL.md:**
```yaml
---
name: code-review
description: Reviews code for best practices. Use when reviewing PRs.
---

When reviewing code, check for:
1. Code organization
2. Error handling
3. Security concerns
4. Test coverage
5. Performance
```

### Marketplace Config

**.claude-plugin/marketplace.json:**
```json
{
  "name": "company-tools",
  "owner": {
    "name": "DevTools Team",
    "email": "devtools@example.com"
  },
  "plugins": [
    {
      "name": "code-formatter",
      "source": "./plugins/formatter",
      "description": "Auto formatting",
      "version": "2.1.0"
    },
    {
      "name": "deploy-tools",
      "source": {
        "source": "github",
        "repo": "company/deploy-plugin"
      }
    }
  ]
}
```

### Source Types

```json
// Path relativo
{ "source": "./plugins/my-plugin" }

// GitHub
{
  "source": {
    "source": "github",
    "repo": "owner/repo"
  }
}

// Git URL
{
  "source": {
    "source": "url",
    "url": "https://gitlab.com/team/plugin.git"
  }
}

// NPM
{
  "source": {
    "source": "npm",
    "package": "@org/claude-plugin"
  }
}
```

### Plugins Oficiales (LSP)

| Plugin | Lenguaje | Instalacion |
|--------|----------|-------------|
| `typescript-lsp` | TypeScript/JS | `npm i -g typescript-language-server typescript` |
| `pyright-lsp` | Python | `pip install pyright` |
| `rust-analyzer-lsp` | Rust | Incluido con rustup |

```bash
# Buscar e instalar
/plugin
# Buscar "lsp" o nombre de lenguaje
```

### Habilitar en Settings

```json
{
  "enabledPlugins": {
    "rust-analyzer-lsp@claude-plugins-official": true,
    "code-formatter@team-tools": true,
    "my-plugin@local": false
  }
}
```

### Variable de Entorno

```bash
# Path al root del plugin (para hooks, scripts)
${CLAUDE_PLUGIN_ROOT}
```

### Seguridad

| Practica | Descripcion |
|----------|-------------|
| No `../` | No pueden referenciar archivos externos |
| Symlinks | Usar para compartir archivos externos |
| Auditoria | Revisar hooks y scripts |
| Testing | Probar localmente antes de distribuir |
| Docs | Documentar permisos en README |

### Probar Multiples Plugins

```bash
claude --plugin-dir ./plugin-one --plugin-dir ./plugin-two
```

### Quick Reference

```bash
# Comandos principales
/plugin                              # UI interactiva
claude plugin install name@market    # Instalar
claude plugin uninstall name         # Desinstalar
claude plugin enable/disable name    # Toggle
claude plugin update name            # Actualizar
claude plugin validate               # Validar JSON

# Marketplaces
/plugin marketplace add owner/repo
claude plugin marketplace list
claude plugin marketplace update

# Testing local
claude --plugin-dir ./my-plugin

# Usar comando de plugin
/plugin-name:command-name args
```

---

## Settings (Configuracion)

Sistema de configuracion jerarquico para personalizar Claude Code.

### Ubicacion de Archivos

| Scope | Ubicacion | Aplica a | Compartido |
|-------|-----------|----------|------------|
| Enterprise | `/etc/claude-code/managed-settings.json` | Todos en maquina | IT-deployed |
| User | `~/.claude/settings.json` | Tu, todos proyectos | No |
| Project | `.claude/settings.json` | Colaboradores | Si (git) |
| Local | `.claude/settings.local.json` | Tu, este proyecto | No (gitignored) |

### Precedencia (Mayor a Menor)

1. Enterprise (managed-settings.json)
2. Command-line arguments
3. Local project (.claude/settings.local.json)
4. Shared project (.claude/settings.json)
5. User (~/.claude/settings.json)

### Estructura del Directorio

```
~/.claude/                    # User scope
├── settings.json            # Settings globales
├── agents/                  # Subagentes
├── commands/                # Slash commands
├── CLAUDE.md                # Memoria
└── hooks.json               # Hooks

.claude/                      # Project scope
├── settings.json            # Compartido (git)
├── settings.local.json      # Local (gitignored)
├── agents/                  # Subagentes proyecto
├── commands/                # Slash commands proyecto
├── CLAUDE.md                # Memoria proyecto
└── rules/                   # Reglas modulares
```

### Comandos

```bash
/config          # Interfaz de settings
/status          # Version, modelo, cuenta
/permissions     # Gestionar permisos
/model <alias>   # Cambiar modelo
```

### Settings Principales

#### Modelo

```json
{
  "model": "sonnet",
  "alwaysThinkingEnabled": true
}
```

| Alias | Modelo |
|-------|--------|
| `sonnet` | claude-sonnet-4-5 |
| `opus` | claude-opus-4-5 |
| `haiku` | claude-3-5-haiku |
| `default` | Recomendado para cuenta |

#### Permisos

```json
{
  "permissions": {
    "allow": [
      "Bash(npm run:*)",
      "Read",
      "Edit(/src/**)"
    ],
    "ask": [
      "Bash(git push:*)"
    ],
    "deny": [
      "Read(.env)",
      "Bash(curl:*)"
    ],
    "additionalDirectories": ["../docs/"],
    "defaultMode": "acceptEdits"
  }
}
```

#### Permission Modes

| Mode | Descripcion |
|------|-------------|
| `default` | Pedir confirmacion para cada tool |
| `acceptEdits` | Auto-aceptar ediciones de archivos |
| `plan` | Solo lectura, sin comandos ni ediciones |
| `bypassPermissions` | Saltar todos los prompts |

#### Sintaxis de Permisos

```json
"Bash(npm run test:*)"        // Prefix match
"Read(.env)"                  // Archivo especifico
"Read(~/Documents/*.pdf)"     // Home directory
"Edit(/src/**/*.ts)"          // Project-relative glob
"WebFetch(domain:github.com)" // Domain filtering
"mcp__github"                 // Todos los tools de MCP
"mcp__github__get_issue"      // Tool MCP especifico
```

#### Sandbox

```json
{
  "sandbox": {
    "enabled": true,
    "autoAllowBashIfSandboxed": true,
    "excludedCommands": ["docker"],
    "allowUnsandboxedCommands": true,
    "network": {
      "allowUnixSockets": ["~/.ssh/agent-socket"],
      "allowLocalBinding": true,
      "httpProxyPort": 8080
    }
  }
}
```

#### Attribution (Commits/PRs)

```json
{
  "attribution": {
    "commit": "Generated with AI\n\nCo-Authored-By: AI <ai@example.com>",
    "pr": ""
  }
}
```

#### Hooks

```json
{
  "hooks": {
    "PreToolUse": {
      "Bash": ["echo 'Running...'"]
    }
  },
  "disableAllHooks": false
}
```

#### MCP Servers

```json
{
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": ["github", "memory"],
  "disabledMcpjsonServers": ["filesystem"]
}
```

#### Plugins

```json
{
  "enabledPlugins": {
    "code-formatter@team-tools": true,
    "rust-analyzer-lsp@claude-plugins-official": true
  }
}
```

#### Variables de Entorno

```json
{
  "env": {
    "NODE_ENV": "development",
    "DEBUG": "1"
  }
}
```

#### Status Line

```json
{
  "statusLine": {
    "type": "command",
    "command": "~/.claude/statusline.sh"
  }
}
```

#### Announcements (Enterprise)

```json
{
  "companyAnnouncements": [
    "Welcome! Review guidelines at docs.company.com",
    "Code reviews required for all PRs"
  ]
}
```

### Variables de Entorno Importantes

#### Modelo y Contexto

| Variable | Proposito |
|----------|-----------|
| `ANTHROPIC_MODEL` | Modelo default |
| `ANTHROPIC_DEFAULT_OPUS_MODEL` | Nombre completo para opus |
| `ANTHROPIC_DEFAULT_SONNET_MODEL` | Nombre completo para sonnet |
| `MAX_THINKING_TOKENS` | Budget de thinking |
| `CLAUDE_CODE_MAX_OUTPUT_TOKENS` | Max tokens de output |

#### Autenticacion

| Variable | Proposito |
|----------|-----------|
| `ANTHROPIC_API_KEY` | API key |
| `ANTHROPIC_AUTH_TOKEN` | Header Authorization custom |
| `AWS_BEARER_TOKEN_BEDROCK` | Bedrock API key |

#### Cloud Providers

| Variable | Proposito |
|----------|-----------|
| `CLAUDE_CODE_USE_BEDROCK` | Usar AWS Bedrock |
| `CLAUDE_CODE_USE_VERTEX` | Usar Google Vertex AI |
| `CLAUDE_CODE_USE_FOUNDRY` | Usar Microsoft Foundry |

#### Bash y Ejecucion

| Variable | Proposito |
|----------|-----------|
| `BASH_DEFAULT_TIMEOUT_MS` | Timeout default |
| `BASH_MAX_TIMEOUT_MS` | Timeout maximo |
| `BASH_MAX_OUTPUT_LENGTH` | Max output antes de truncar |

#### MCP

| Variable | Proposito |
|----------|-----------|
| `MCP_TIMEOUT` | Timeout de startup MCP |
| `MCP_TOOL_TIMEOUT` | Timeout de ejecucion |
| `MAX_MCP_OUTPUT_TOKENS` | Max tokens en respuestas |

#### Telemetria

| Variable | Proposito |
|----------|-----------|
| `DISABLE_TELEMETRY` | Deshabilitar Statsig |
| `DISABLE_ERROR_REPORTING` | Deshabilitar Sentry |
| `DISABLE_AUTOUPDATER` | Deshabilitar updates |

### Ejemplo: Team Settings

**.claude/settings.json (git):**
```json
{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(npm:*)",
      "Bash(git:*)",
      "Read",
      "Edit(/src/**)"
    ],
    "deny": [
      "Read(.env)",
      "Read(.env.*)",
      "Bash(rm -rf)"
    ],
    "defaultMode": "acceptEdits"
  },
  "model": "sonnet",
  "enableAllProjectMcpServers": true
}
```

### Ejemplo: Local Overrides

**.claude/settings.local.json (gitignored):**
```json
{
  "model": "haiku",
  "env": {
    "DEBUG": "1",
    "LOCAL_API_URL": "http://localhost:3000"
  },
  "permissions": {
    "allow": ["Bash(./scripts/dev.sh)"]
  }
}
```

### Ejemplo: User Settings

**~/.claude/settings.json:**
```json
{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "model": "opus",
  "permissions": {
    "allow": ["Bash", "Read", "Edit", "WebFetch"]
  },
  "statusLine": {
    "type": "command",
    "command": "~/.claude/statusline.sh"
  }
}
```

### Ejemplo: Enterprise Security

**/etc/claude-code/managed-settings.json:**
```json
{
  "permissions": {
    "deny": [
      "Bash(curl:*)",
      "Bash(wget:*)",
      "WebFetch",
      "Read(.env)",
      "Read(~/.aws/**)"
    ],
    "disableBypassPermissionsMode": "disable"
  },
  "sandbox": {
    "enabled": true,
    "allowUnsandboxedCommands": false
  },
  "allowedMcpServers": [
    { "serverName": "github" }
  ],
  "allowManagedHooksOnly": true
}
```

### Quick Reference

```bash
# Comandos principales
/config              # UI de settings
/status              # Info de version/cuenta
/permissions         # Gestionar permisos
/model opus          # Cambiar modelo

# Archivos clave
~/.claude/settings.json           # User (global)
.claude/settings.json             # Project (git)
.claude/settings.local.json       # Local (gitignored)

# Schema para validacion
"$schema": "https://json.schemastore.org/claude-code-settings.json"
```

---

## CLAUDE.md (Memory Files)

CLAUDE.md es el sistema de memoria persistente de Claude Code que se carga automaticamente al inicio de cada sesion.

### Proposito

- Almacenar instrucciones y preferencias persistentes
- Documentar arquitectura y estandares del proyecto
- Definir comandos frecuentes y workflows
- Compartir contexto con el equipo

### Jerarquia de Archivos (5 niveles)

| Prioridad | Tipo | Ubicacion | Compartido |
|-----------|------|-----------|------------|
| 1 (Mayor) | Enterprise | `/etc/claude-code/CLAUDE.md` | Organizacion |
| 2 | Proyecto | `./CLAUDE.md` o `./.claude/CLAUDE.md` | Equipo (git) |
| 3 | Reglas proyecto | `./.claude/rules/*.md` | Equipo (git) |
| 4 | Usuario | `~/.claude/CLAUDE.md` | Solo tu |
| 5 (Menor) | Local proyecto | `./CLAUDE.local.md` | Solo tu (gitignored) |

### Descubrimiento de Archivos

```
proyecto/
├── CLAUDE.md                 # Cargado al inicio
├── .claude/
│   ├── CLAUDE.md            # Alternativa
│   └── rules/
│       ├── typescript.md    # Regla modular
│       └── testing.md       # Regla modular
├── src/
│   └── CLAUDE.md            # Cargado al trabajar en src/
└── CLAUDE.local.md          # Personal, gitignored
```

**Orden de carga:**
1. Enterprise policy (si existe)
2. User rules (`~/.claude/rules/`)
3. Project memory (directorio actual y padres)
4. Project rules (`.claude/rules/`)
5. Local overrides (`CLAUDE.local.md`)

### Sintaxis de Imports

```markdown
# Importar archivos con @
See @README.md for project overview
Follow @docs/API_DESIGN.md for standards
Check @~/.claude/personal.md for my preferences

# NO se evaluan dentro de code blocks
`@path/to/file` # Este NO se importa
```

| Regla | Descripcion |
|-------|-------------|
| Paths relativos | `@docs/file.md` |
| Paths absolutos | `@/full/path/file.md` |
| Home directory | `@~/.claude/file.md` |
| Max profundidad | 5 niveles de imports recursivos |

### Comandos

```bash
# Inicializar CLAUDE.md nuevo
/init

# Editar archivos de memoria
/memory

# Ver archivos cargados
/memory  # Muestra lista de archivos
```

### Ejemplo Basico

```markdown
# Mi Proyecto

## Arquitectura
- Backend: Node.js + Express en `/server`
- Frontend: React en `/client`
- Database: PostgreSQL

## Estilo de Codigo
- TypeScript strict mode
- 2 espacios de indentacion
- ESLint + Prettier

## Comandos Frecuentes
- Dev: `npm run dev`
- Build: `npm run build`
- Test: `npm test`
- Deploy: `vercel --prod`

## Git Workflow
- Features: `feature/descripcion`
- Fixes: `fix/descripcion`
- Commits: `type(scope): description`
```

### Ejemplo con Imports

```markdown
# Proyecto NewCool

See @README.md for documentation
See @docs/ARCHITECTURE.md for system design

## Tecnologias
- Node.js + TypeScript
- PostgreSQL + Redis
- MCP integration

## Reglas
Follow @.claude/rules/typescript.md
Follow @.claude/rules/testing.md

## Preferencias personales
See @~/.claude/team-newcool.md
```

### Ejemplo de Reglas Modulares

```bash
# Crear estructura
mkdir -p .claude/rules
```

**.claude/rules/typescript.md:**
```markdown
# TypeScript Rules
- Strict mode siempre habilitado
- No usar `any`, preferir `unknown`
- Interfaces para objetos, types para unions
- Exportar tipos junto con implementaciones
```

**.claude/rules/testing.md:**
```markdown
# Testing Rules
- Jest para unit tests
- Coverage minimo: 80%
- Nombrar tests: `describe('Component')` + `it('should...')`
- Mocks en `__mocks__/`
```

### CLAUDE.md vs CLAUDE.local.md

| Aspecto | CLAUDE.md | CLAUDE.local.md |
|---------|-----------|-----------------|
| **Proposito** | Estandares del equipo | Preferencias personales |
| **Git** | Committed | Gitignored |
| **Visibilidad** | Todo el equipo | Solo tu |
| **Prioridad** | Menor | Mayor (override) |
| **Uso** | Arquitectura, comandos | URLs locales, API keys test |

**CLAUDE.md (compartido):**
```markdown
# API Standards
- Base URL: configurar en .env
- Auth: JWT tokens
```

**CLAUDE.local.md (personal):**
```markdown
# Mi Setup Local
- DB URL: postgresql://localhost:5432/dev
- Test API key: sk-test-xxx
- Puerto local: 3001
```

### Crear Memorias

```bash
# Memoria de proyecto
echo "# Project standards" > ./CLAUDE.md

# Memoria personal global
mkdir -p ~/.claude
echo "# My preferences" > ~/.claude/CLAUDE.md

# Reglas modulares
mkdir -p .claude/rules
echo "# Backend rules" > .claude/rules/backend.md

# Memoria local (personal, gitignored)
echo "# My local setup" > ./CLAUDE.local.md
```

### Best Practices

| Practica | Descripcion |
|----------|-------------|
| Ser especifico | "2 espacios" mejor que "formatear bien" |
| Usar bullets | Para instrucciones individuales |
| Agrupar | Bajo headings descriptivos |
| Comandos frecuentes | Incluir build, test, lint, deploy |
| Actualizar | Revisar periodicamente |
| Modularizar | Usar `.claude/rules/` para proyectos grandes |
| Imports | Referenciar docs existentes con @ |

### Quick Reference

```bash
# Inicializar
/init

# Editar
/memory

# Estructura recomendada
proyecto/
├── CLAUDE.md              # Compartido
├── CLAUDE.local.md        # Personal (gitignored)
└── .claude/
    ├── CLAUDE.md          # Alternativa compartida
    └── rules/
        ├── backend.md     # Reglas backend
        ├── frontend.md    # Reglas frontend
        └── testing.md     # Reglas testing
```

---

## MCP (Model Context Protocol)

MCP es un estandar open-source para integraciones AI-herramientas que permite conectar Claude Code a cientos de servicios externos.

### Que permite MCP

- Implementar features desde issue trackers (JIRA, GitHub Issues)
- Analizar datos de monitoreo (Sentry, Datadog)
- Consultar bases de datos directamente (PostgreSQL, MongoDB)
- Integrar disenos desde Figma
- Automatizar workflows (Slack, Gmail)
- Acceder a datos en tiempo real

### Componentes

| Componente | Descripcion |
|------------|-------------|
| **MCP Servers** | Servicios que exponen tools, resources, prompts |
| **Tools** | Funciones que Claude puede llamar |
| **Resources** | Datos referenciables con @ mentions |
| **Prompts** | Templates que se convierten en slash commands |
| **Transport** | `http`, `sse`, o `stdio` |

### Ubicacion de Configuracion

| Scope | Archivo | Compartido | Uso |
|-------|---------|------------|-----|
| Local | `~/.claude.json` | Solo tu, proyecto actual | Personal/experimental |
| Project | `.mcp.json` | Equipo (en git) | Colaboracion |
| User | `~/.claude.json` | Tu, todos los proyectos | Utilidades personales |
| Enterprise | `/etc/claude-code/managed-mcp.json` | Organizacion | Control admin |

### Formato .mcp.json

```json
{
  "mcpServers": {
    "server-name": {
      "type": "http",
      "url": "https://api.example.com/mcp",
      "headers": {
        "Authorization": "Bearer ${API_KEY}"
      }
    },
    "local-server": {
      "type": "stdio",
      "command": "/path/to/server",
      "args": ["--config", "config.json"],
      "env": {
        "API_KEY": "${API_KEY}"
      }
    }
  }
}
```

### Comandos CLI

#### Agregar servidores

```bash
# HTTP remoto
claude mcp add --transport http <name> <url>
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# SSE remoto
claude mcp add --transport sse <name> <url>

# Stdio local
claude mcp add --transport stdio <name> -- <command> [args...]
claude mcp add --transport stdio db -- npx -y @bytebase/dbhub --dsn "postgresql://..."

# Con variables de entorno
claude mcp add --transport stdio server --env API_KEY=xxx -- npx my-server

# Con header de autenticacion
claude mcp add --transport http api https://api.example.com/mcp \
  --header "Authorization: Bearer token"

# Desde JSON
claude mcp add-json <name> '<json>'
```

#### Gestion

```bash
# Listar servidores
claude mcp list

# Detalles de servidor
claude mcp get <name>

# Eliminar servidor
claude mcp remove <name>

# Reset approvals
claude mcp reset-project-choices

# Importar desde Claude Desktop
claude mcp add-from-claude-desktop

# Iniciar Claude como servidor MCP
claude mcp serve
```

#### Opciones de scope

```bash
--scope local      # Solo proyecto actual (default)
--scope project    # Compartido via .mcp.json
--scope user       # Disponible en todos los proyectos
```

### Variables de Entorno

```json
{
  "mcpServers": {
    "api": {
      "type": "http",
      "url": "${API_URL:-https://default.com}/mcp",
      "headers": {
        "Authorization": "Bearer ${API_KEY}"
      }
    }
  }
}
```

| Sintaxis | Descripcion |
|----------|-------------|
| `${VAR}` | Expande a variable VAR |
| `${VAR:-default}` | Usa VAR o default si no existe |

### Servidores Populares

#### Monitoring & Observability

```bash
# Sentry
claude mcp add --transport http sentry https://mcp.sentry.dev/mcp

# Datadog, New Relic, Statsig (similar)
```

#### Development & CI/CD

```bash
# GitHub
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# GitLab, Jira, Asana (similar)
```

#### Databases

```bash
# PostgreSQL
claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \
  --dsn "postgresql://user:pass@host:5432/db"

# MySQL, MongoDB (similar con drivers apropiados)
```

#### Communication

```bash
# Notion
claude mcp add --transport http notion https://mcp.notion.com/mcp

# Slack, Gmail, Discord (similar)
```

### Usar MCP Tools

```bash
# Claude llama a tools automaticamente
> "What are the most common errors in Sentry?"
> "Create a GitHub issue for this bug"
> "Query the orders table for last month"
```

### Usar MCP Resources (@ mentions)

```bash
# Referenciar datos con @
@github:issue://123
@postgres:schema://users
@docs:file://api/auth

# En prompts
> "Analyze @github:issue://123 and suggest a fix"
```

### Usar MCP Prompts (slash commands)

```bash
# Formato
/mcp__<servername>__<promptname> [args]

# Ejemplos
/mcp__github__list_prs
/mcp__github__pr_review 456
/mcp__jira__create_issue "Bug title" high
```

### Autenticacion OAuth

```bash
# 1. Agregar servidor
claude mcp add --transport http sentry https://mcp.sentry.dev/mcp

# 2. Autenticar en Claude Code
> /mcp
# Seleccionar "Authenticate" y seguir instrucciones del browser

# 3. Usar
> "Show me recent errors"
```

### Ejemplos de Configuracion

#### Team shared (.mcp.json)

```json
{
  "mcpServers": {
    "github": {
      "type": "http",
      "url": "https://api.githubcopilot.com/mcp/"
    },
    "sentry": {
      "type": "http",
      "url": "https://mcp.sentry.dev/mcp"
    },
    "internal-api": {
      "type": "stdio",
      "command": "/usr/local/bin/company-mcp",
      "env": {
        "API_KEY": "${COMPANY_API_KEY}"
      }
    }
  }
}
```

#### Database con credenciales

```bash
export DB_URL="postgresql://user:pass@host:5432/db"
claude mcp add --transport stdio db --env DSN=${DB_URL} -- npx dbhub
```

#### Multiple transports

```bash
# HTTP remoto
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# Node.js local
claude mcp add --transport stdio tools -- npx -y my-custom-server

# Python local
claude mcp add --transport stdio py-tools -- python /path/to/server.py
```

### Claude como MCP Server

```bash
# Iniciar Claude como servidor
claude mcp serve

# En claude_desktop_config.json
{
  "mcpServers": {
    "claude-code": {
      "type": "stdio",
      "command": "claude",
      "args": ["mcp", "serve"]
    }
  }
}
```

### Limites y Timeouts

```bash
# Output limit (default 25,000 tokens)
export MAX_MCP_OUTPUT_TOKENS=50000

# Timeout (default 30 segundos)
export MCP_TIMEOUT=10000  # 10 segundos
```

### Seguridad

| Practica | Descripcion |
|----------|-------------|
| Validar URLs | Revisar antes de agregar servidores publicos |
| Revisar permisos | Servidores project-scope requieren aprobacion |
| Gestionar tokens | Usar `/mcp` para manejar autenticacion |
| Enterprise | Usar `managed-mcp.json` para control organizacional |
| Allowed/Denied | Usar `allowedMcpServers`/`deniedMcpServers` |

### Crear MCP Server Custom

```bash
# Usando MCP SDK (Python o TypeScript)
# https://modelcontextprotocol.io/quickstart/server

# Agregar server local
claude mcp add --transport stdio my-server -- node /path/to/server.js
claude mcp add --transport stdio my-server -- python /path/to/server.py
```

---

## Hooks System

Los hooks son comandos shell que se ejecutan en respuesta a eventos de Claude Code.

### Tipos de Eventos (10 tipos)

| Evento | Descripcion | Puede bloquear |
|--------|-------------|----------------|
| `PreToolUse` | Antes de ejecutar tool | Si |
| `PostToolUse` | Despues de completar tool | No |
| `PermissionRequest` | Al mostrar dialogo de permiso | Si |
| `Notification` | Cuando envia notificaciones | No |
| `UserPromptSubmit` | Al enviar prompt, antes de procesar | Si |
| `Stop` | Cuando el agente principal termina | Si |
| `SubagentStop` | Cuando un subagente termina | Si |
| `PreCompact` | Antes de compactar contexto | No |
| `SessionStart` | Al iniciar o reanudar sesion | No |
| `SessionEnd` | Al terminar sesion | No |

### Ubicacion de Configuracion

| Archivo | Ambito | Commit |
|---------|--------|--------|
| `~/.claude/settings.json` | Usuario (todos los proyectos) | No |
| `.claude/settings.json` | Proyecto | Si |
| `.claude/settings.local.json` | Proyecto local | No |

### Estructura Basica

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "ToolPattern",
        "hooks": [
          {
            "type": "command",
            "command": "your-bash-command",
            "timeout": 60
          }
        ]
      }
    ]
  }
}
```

### Matchers

#### Para Tools (PreToolUse, PostToolUse, PermissionRequest)

| Patron | Descripcion | Ejemplo |
|--------|-------------|---------|
| `ToolName` | Match exacto (case-sensitive) | `Write` |
| `Tool1\|Tool2` | Regex OR | `Edit\|Write` |
| `Tool.*` | Regex wildcard | `Notebook.*` |
| `*` o `""` | Match all | `*` |

#### Tools comunes

```
Task, Bash, Glob, Grep, Read, Edit, Write,
WebFetch, WebSearch, mcp__<server>__<tool>
```

#### Para Notification

| Matcher | Descripcion |
|---------|-------------|
| `permission_prompt` | Peticiones de permiso |
| `idle_prompt` | Notificacion de espera |
| `auth_success` | Autenticacion exitosa |
| `elicitation_dialog` | MCP tool elicitation |

#### Para PreCompact

| Matcher | Descripcion |
|---------|-------------|
| `manual` | Invocado desde `/compact` |
| `auto` | Auto-compact por contexto lleno |

#### Para SessionStart

| Matcher | Descripcion |
|---------|-------------|
| `startup` | Inicio de sesion |
| `resume` | Sesion reanudada |
| `clear` | Sesion limpiada con `/clear` |
| `compact` | Despues de compact |

### Variables de Entorno

| Variable | Disponible en | Descripcion |
|----------|---------------|-------------|
| `CLAUDE_PROJECT_DIR` | Todos | Path absoluto al proyecto |
| `CLAUDE_CODE_REMOTE` | Todos | `"true"` si es remoto |
| `CLAUDE_ENV_FILE` | SessionStart | Archivo para persistir env vars |

### Input/Output del Hook

#### Input (JSON via stdin)

```json
{
  "session_id": "uuid",
  "transcript_path": "path/to/transcript.jsonl",
  "cwd": "current/working/directory",
  "permission_mode": "default|plan|acceptEdits",
  "hook_event_name": "PreToolUse",
  "tool_name": "Bash",
  "tool_input": { "command": "npm test" },
  "tool_response": {}
}
```

#### Exit Codes

| Code | Efecto |
|------|--------|
| `0` | Exito, stdout parseado como JSON |
| `2` | Error bloqueante, stderr mostrado |
| Otro | Error no-bloqueante, continua |

#### Output JSON (exit code 0)

```json
{
  "decision": "allow|deny|block|ask",
  "reason": "explicacion",
  "continue": true,
  "stopReason": "mensaje",
  "systemMessage": "warning",
  "suppressOutput": false,
  "permissionDecision": "allow|deny|ask",
  "updatedInput": { "field": "new_value" },
  "additionalContext": "contexto extra"
}
```

### Ejemplos de Hooks

#### 1. Log de comandos Bash

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.command' >> ~/.claude/bash-log.txt"
          }
        ]
      }
    ]
  }
}
```

#### 2. Auto-format TypeScript

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | { read f; [[ \"$f\" == *.ts ]] && npx prettier --write \"$f\"; exit 0; }"
          }
        ]
      }
    ]
  }
}
```

#### 3. Notificacion de escritorio

```json
{
  "hooks": {
    "Notification": [
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "osascript -e 'display notification \"Awaiting input\" with title \"Claude Code\"'"
          }
        ]
      }
    ]
  }
}
```

#### 4. Proteger archivos sensibles

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"import json,sys; d=json.load(sys.stdin); p=d.get('tool_input',{}).get('file_path',''); sys.exit(2 if any(x in p for x in ['.env','.git/','secrets']) else 0)\""
          }
        ]
      }
    ]
  }
}
```

#### 5. Auto-aprobar lectura de docs

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"import json,sys; d=json.load(sys.stdin); p=d.get('tool_input',{}).get('file_path',''); ok=p.endswith(('.md','.txt','.json')); print(json.dumps({'permissionDecision':'allow' if ok else 'ask'})); sys.exit(0)\""
          }
        ]
      }
    ]
  }
}
```

#### 6. Persistir variables de entorno

```bash
#!/bin/bash
# session-init.sh
if [ -n "$CLAUDE_ENV_FILE" ]; then
  echo 'export NODE_ENV=production' >> "$CLAUDE_ENV_FILE"
  echo 'export API_URL=https://api.example.com' >> "$CLAUDE_ENV_FILE"
fi
exit 0
```

```json
{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "./scripts/session-init.sh"
          }
        ]
      }
    ]
  }
}
```

#### 7. Hook con prompt (tipo prompt)

```json
{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evalua si todas las tareas estan completas. Responde JSON: {\"decision\": \"approve|block\", \"reason\": \"...\"}"
          }
        ]
      }
    ]
  }
}
```

### Seguridad

| Practica | Descripcion |
|----------|-------------|
| Revisar comandos | Siempre revisar antes de agregar |
| Validar input | No confiar en input ciegamente |
| Quotear variables | Usar `"$VAR"` no `$VAR` |
| Paths absolutos | Usar `$CLAUDE_PROJECT_DIR` |
| Evitar sensibles | No tocar `.env`, `.git/`, keys |
| Reiniciar sesion | Cambios toman efecto en proxima sesion |

### Configurar via CLI

```bash
# Abrir configurador interactivo
/hooks

# Flujo:
# 1. Seleccionar evento (PreToolUse, etc.)
# 2. Agregar matcher (Bash, Edit|Write, etc.)
# 3. Agregar comando hook
# 4. Guardar (User o Project settings)
# 5. Reiniciar sesion para aplicar
```

---

## CLI Flags

### Comandos Base

| Comando | Descripcion | Ejemplo |
|---------|-------------|---------|
| `claude` | Iniciar REPL interactivo | `claude` |
| `claude "query"` | REPL con prompt inicial | `claude "explain this project"` |
| `claude -p "query"` | Query via SDK, luego salir | `claude -p "explain this function"` |
| `cat file \| claude -p` | Procesar contenido piped | `cat logs.txt \| claude -p "explain"` |
| `claude -c` | Continuar conversacion reciente | `claude -c` |
| `claude -r "session"` | Reanudar sesion por ID/nombre | `claude -r "auth-refactor"` |
| `claude update` | Actualizar a ultima version | `claude update` |
| `claude mcp` | Configurar servidores MCP | `claude mcp add server` |

### Flags de Operacion Core

| Flag | Corto | Descripcion | Default |
|------|-------|-------------|---------|
| `--print` | `-p` | Imprimir respuesta sin modo interactivo | Interactive |
| `--continue` | `-c` | Cargar conversacion mas reciente | New session |
| `--resume` | `-r` | Reanudar sesion especifica | New session |
| `--version` | `-v` | Mostrar version | - |
| `--session-id` | | Usar UUID especifico | Auto-generated |
| `--fork-session` | | Crear nuevo ID al reanudar | Reuse original |

### Flags de Modelo y Agente

| Flag | Descripcion | Ejemplo |
|------|-------------|---------|
| `--model` | Modelo con alias o nombre completo | `--model opus` |
| `--agent` | Especificar agente para sesion | `--agent my-agent` |
| `--agents` | Definir subagentes via JSON | `--agents '{"reviewer":{...}}'` |
| `--fallback-model` | Fallback automatico si overloaded | `--fallback-model sonnet` |

#### Aliases de modelo

| Alias | Modelo completo |
|-------|-----------------|
| `sonnet` | claude-sonnet-4-5-20250929 |
| `opus` | claude-opus-4-5-20250929 |
| `haiku` | claude-3-5-haiku-20241022 |

### Flags de System Prompt

| Flag | Descripcion | Modo |
|------|-------------|------|
| `--system-prompt` | Reemplazar prompt completo | Interactive + Print |
| `--system-prompt-file` | Cargar prompt desde archivo | Print only |
| `--append-system-prompt` | Agregar texto al prompt default | Interactive + Print |

```bash
# Reemplazar completamente
claude --system-prompt "You are a Python expert"

# Agregar al default (recomendado)
claude --append-system-prompt "Always use TypeScript"

# Desde archivo
claude -p --system-prompt-file ./prompt.txt "query"
```

### Flags de Tools y Permisos

| Flag | Descripcion | Ejemplo |
|------|-------------|---------|
| `--tools` | Tools disponibles (`""` = ninguno) | `--tools "Bash,Edit,Read"` |
| `--allowedTools` | Tools sin prompt de permiso | `--allowedTools "Bash(git:*)"` |
| `--disallowedTools` | Tools removidos del contexto | `--disallowedTools "Edit"` |
| `--permission-mode` | Modo de permisos inicial | `--permission-mode plan` |
| `--permission-prompt-tool` | Tool MCP para permisos | `--permission-prompt-tool mcp_auth` |
| `--dangerously-skip-permissions` | Saltar permisos (peligroso!) | - |

#### Permission Modes

| Mode | Descripcion |
|------|-------------|
| `default` | Pedir confirmacion para tools |
| `plan` | Solo planificar, no ejecutar |
| `auto-accept` | Aceptar automaticamente |

### Flags de Output y Formato

| Flag | Descripcion | Opciones |
|------|-------------|----------|
| `--output-format` | Formato de salida (print mode) | `text`, `json`, `stream-json` |
| `--input-format` | Formato de entrada | `text`, `stream-json` |
| `--include-partial-messages` | Incluir eventos parciales streaming | - |
| `--verbose` | Logging detallado turn-by-turn | - |

```bash
# JSON para scripting
claude -p --output-format json "query"

# Stream JSON
claude -p --output-format stream-json "query"

# Verbose logging
claude --verbose "complex task"
```

### Flags de Output Estructurado

| Flag | Descripcion | Modo |
|------|-------------|------|
| `--json-schema` | JSON validado contra schema | Print only |
| `--max-turns` | Limitar turns agenticos | Print only |

```bash
# Limitar a 3 turns
claude -p --max-turns 3 "quick question"

# Output con schema
claude -p --json-schema '{"type":"object","properties":{"name":{"type":"string"}}}' "extract name"
```

### Flags de Settings

| Flag | Descripcion | Default |
|------|-------------|---------|
| `--settings` | Path a JSON de settings | Default locations |
| `--setting-sources` | Fuentes a cargar | `user,project,local` |
| `--add-dir` | Agregar directorios de trabajo | Current dir |

```bash
# Settings custom
claude --settings ./settings.json

# Multiples directorios
claude --add-dir ../apps ../lib "search across repos"
```

### Flags de Plugins y MCP

| Flag | Descripcion | Ejemplo |
|------|-------------|---------|
| `--plugin-dir` | Cargar plugins desde directorio | `--plugin-dir ./my-plugins` |
| `--mcp-config` | Cargar servidores MCP desde JSON | `--mcp-config ./mcp.json` |
| `--strict-mcp-config` | Solo usar MCP de --mcp-config | - |

### Flags de Browser e IDE

| Flag | Descripcion | Default |
|------|-------------|---------|
| `--chrome` | Habilitar integracion Chrome | Disabled |
| `--no-chrome` | Deshabilitar Chrome para sesion | Per settings |
| `--ide` | Auto-conectar a IDE al inicio | Manual |

### Flags de Debug

| Flag | Descripcion | Ejemplo |
|------|-------------|---------|
| `--debug` | Modo debug con filtro de categoria | `--debug "api,hooks"` |
| `--enable-lsp-logging` | Logging verbose de LSP | - |
| `--betas` | Beta headers para API (solo API key) | `--betas interleaved-thinking` |

```bash
# Debug filtrado
claude --debug "api,hooks"

# Debug excluyendo categorias
claude --debug "!statsig,!file"
```

### Configuracion de Subagentes (--agents)

```json
{
  "agent-name": {
    "description": "Cuando usar este agente",
    "prompt": "System prompt del agente",
    "tools": ["Read", "Edit", "Bash"],
    "model": "sonnet"
  }
}
```

```bash
# Ejemplo completo
claude --agents '{
  "code-reviewer": {
    "description": "Expert code reviewer",
    "prompt": "You are a senior code reviewer...",
    "tools": ["Read", "Grep", "Glob"],
    "model": "sonnet"
  }
}'
```

### Ejemplos Comunes

```bash
# Sesion interactiva con prompt inicial
claude "explain this codebase"

# Non-interactive, imprimir resultado
claude -p "refactor this function"

# Continuar sesion anterior
claude -c

# Reanudar sesion especifica
claude -r "auth-refactor" "Add error handling"

# Usar modelo especifico
claude --model opus "complex analysis"

# JSON output para scripting
claude -p --output-format json "analyze code"

# Agregar instrucciones al prompt
claude --append-system-prompt "Always use TypeScript"

# Multiples directorios
claude --add-dir ../apps ../lib "search repos"

# Chrome para web automation
claude --chrome "automate this website"

# Version y update
claude -v
claude update
```

---

## Slash Commands

### Comandos Built-in (37 comandos)

| Comando | Descripcion | Argumentos |
|---------|-------------|------------|
| `/add-dir` | Agregar directorios de trabajo adicionales | - |
| `/agents` | Gestionar subagentes AI personalizados | - |
| `/bashes` | Listar y gestionar tareas en background | - |
| `/bug` | Reportar bugs (envia conversacion a Anthropic) | - |
| `/clear` | Limpiar historial de conversacion | - |
| `/compact` | Compactar conversacion con instrucciones opcionales | `[instructions]` |
| `/config` | Abrir interfaz de Settings (tab Config) | - |
| `/context` | Visualizar uso de contexto como grid de colores | - |
| `/cost` | Mostrar estadisticas de uso de tokens | - |
| `/doctor` | Verificar salud de la instalacion | - |
| `/exit` | Salir del REPL | - |
| `/export` | Exportar conversacion a archivo o clipboard | `[filename]` |
| `/help` | Obtener ayuda de uso | - |
| `/hooks` | Gestionar configuraciones de hooks | - |
| `/ide` | Gestionar integraciones IDE y mostrar estado | - |
| `/init` | Inicializar proyecto con guia `CLAUDE.md` | - |
| `/install-github-app` | Configurar Claude GitHub Actions | - |
| `/login` | Cambiar cuenta de Anthropic | - |
| `/logout` | Cerrar sesion de cuenta Anthropic | - |
| `/mcp` | Gestionar conexiones MCP y OAuth | - |
| `/memory` | Editar archivos de memoria `CLAUDE.md` | - |
| `/model` | Seleccionar o cambiar modelo AI | - |
| `/output-style` | Establecer estilo de output | `[style]` |
| `/permissions` | Ver o actualizar permisos | - |
| `/plugin` | Gestionar plugins de Claude Code | - |
| `/pr-comments` | Ver comentarios de pull request | - |
| `/privacy-settings` | Ver y actualizar configuracion de privacidad | - |
| `/release-notes` | Ver notas de version | - |
| `/rename` | Renombrar sesion actual | `<name>` |
| `/resume` | Reanudar conversacion por ID o nombre | `[session]` |
| `/review` | Solicitar revision de codigo | - |
| `/rewind` | Retroceder conversacion y/o codigo | - |
| `/sandbox` | Habilitar bash aislado (filesystem + network) | - |
| `/security-review` | Revision de seguridad de cambios pendientes | - |
| `/stats` | Visualizar uso diario, historial, streaks | - |
| `/status` | Abrir Settings (tab Status) | - |
| `/statusline` | Configurar status line UI | - |
| `/terminal-setup` | Instalar Shift+Enter para newlines | - |
| `/todos` | Listar items TODO actuales | - |
| `/usage` | Mostrar limites de plan (solo suscripcion) | - |
| `/vim` | Entrar en modo vim | - |

### Atajos de Modelo

| Atajo | Funcion |
|-------|---------|
| `Option+P` (macOS) | Cambiar modelo sin limpiar prompt |
| `Alt+P` (Win/Linux) | Cambiar modelo sin limpiar prompt |

### Comandos Custom

Ubicacion de comandos personalizados:
- **Proyecto:** `.claude/commands/` (compartido con equipo)
- **Personal:** `~/.claude/commands/` (disponible en todos los proyectos)

#### Sintaxis de archivos custom

```markdown
---
allowed-tools: Bash(git add:*), Bash(git status:*)
argument-hint: [arg1] [arg2]
description: Descripcion breve del comando
model: claude-3-5-haiku-20241022
disable-model-invocation: false
---

Tu prompt aqui con $ARGUMENTS o $1, $2 para argumentos posicionales.
Usa @ para referenciar archivos.
Usa ! al inicio para ejecutar bash.
```

#### Ejemplos de comandos custom

```bash
# Crear comando /commit-smart
echo "Analiza los cambios y genera un commit message siguiendo conventional commits. $ARGUMENTS" > ~/.claude/commands/commit-smart.md

# Crear comando /test-file
echo "Ejecuta los tests del archivo @$1 y muestra el resultado" > ~/.claude/commands/test-file.md
```

### Comandos MCP

Formato: `/mcp__<server-name>__<prompt-name> [arguments]`

Descubiertos dinamicamente desde servidores MCP conectados.

```bash
# Ejemplos
/mcp__github__list-repos
/mcp__slack__send-message #channel "mensaje"
/mcp__jira__create-issue
```

### Quick Prefixes

| Prefijo | Descripcion | Ejemplo |
|---------|-------------|---------|
| `/` | Slash command | `/help` |
| `#` | Memory shortcut (agrega a CLAUDE.md) | `# Este proyecto usa React` |
| `!` | Bash mode (ejecuta sin interpretacion) | `! npm test` |
| `@` | File path mention (autocomplete) | `@src/index.ts` |

### Input Multilinea

| Metodo | Atajo | Notas |
|--------|-------|-------|
| Quick escape | `\` + `Enter` | Funciona en todas las terminales |
| macOS default | `Option+Enter` | Default en macOS |
| Terminal setup | `Shift+Enter` | Despues de `/terminal-setup` |
| Paste directo | - | Para bloques de codigo |

---

## Referencias

### Moods / Thinking Verbs
- [Pallav Agarwal (Anthropic) - Lista oficial](https://x.com/pallavmac/status/1897491460636778693)
- [GitHub - anthropics/claude-code](https://github.com/anthropics/claude-code)
- [GitHub - Piebald-AI/tweakcc](https://github.com/Piebald-AI/tweakcc)
- [GitHub - levindixon/tengu_spinner_words](https://github.com/levindixon/tengu_spinner_words)

### Slash Commands & CLI
- [Claude Code Docs - Slash Commands](https://docs.anthropic.com/en/docs/claude-code/slash-commands)
- [Claude Code Docs - Interactive Mode](https://docs.anthropic.com/en/docs/claude-code/interactive-mode)
- [Claude Code Docs - CLI Reference](https://docs.anthropic.com/en/docs/claude-code/cli-reference)

### Hooks
- [Claude Code Docs - Hooks Guide](https://docs.anthropic.com/en/docs/claude-code/hooks-guide)
- [Claude Code Docs - Hooks Reference](https://docs.anthropic.com/en/docs/claude-code/hooks)

### MCP
- [Claude Code Docs - MCP](https://docs.anthropic.com/en/docs/claude-code/mcp)
- [Model Context Protocol](https://modelcontextprotocol.io/introduction)
- [MCP Servers Registry](https://github.com/modelcontextprotocol/servers)

### CLAUDE.md
- [Claude Code Docs - Memory](https://docs.anthropic.com/en/docs/claude-code/memory)

### Settings
- [Claude Code Docs - Settings](https://docs.anthropic.com/en/docs/claude-code/settings)
- [Settings JSON Schema](https://json.schemastore.org/claude-code-settings.json)

### Plugins
- [Claude Code Docs - Plugins](https://docs.anthropic.com/en/docs/claude-code/plugins)
- [Claude Code Docs - Plugins Reference](https://docs.anthropic.com/en/docs/claude-code/plugins-reference)
- [Claude Code Docs - Marketplaces](https://docs.anthropic.com/en/docs/claude-code/plugin-marketplaces)

### Skills
- [Claude Code Docs - Skills Overview](https://docs.anthropic.com/en/docs/claude-code/skills)
- [Claude Code Docs - Skills Best Practices](https://docs.anthropic.com/en/docs/claude-code/skills-best-practices)

### Agents
- [Claude Code Docs - Agents Overview](https://docs.anthropic.com/en/docs/claude-code/sub-agents)
- [Claude Code Docs - Agent Configuration](https://docs.anthropic.com/en/docs/claude-code/agent-configuration)
- [Claude Agent SDK](https://github.com/anthropics/claude-code-sdk-python)

---

## Resumen del Documento

| Seccion | Cantidad |
|---------|----------|
| Moods oficiales | 56 |
| Moods extendidos | 34 |
| **Total moods** | **90** |
| Agents built-in | 3 |
| Agent examples | 3 |
| Agent permission modes | 4 |
| Skills scopes | 4 |
| Skills examples | 5 |
| Plugin components | 6 |
| Plugin scopes | 4 |
| Settings scopes | 4 |
| Settings options | 25+ |
| Environment vars | 30+ |
| CLAUDE.md niveles | 5 |
| MCP commands | 10+ |
| MCP transports | 3 |
| Hook events | 10 |
| Hook examples | 7 |
| CLI flags | 35+ |
| Slash commands built-in | 37 |
| Atajos de teclado | 18 |
| Quick prefixes | 4 |
| Thinking triggers | 5 |
| Permission modes | 4 |
| Output formats | 3 |

---

*Documentado para el ecosistema NewCool - Enero 2026*
*Referencia completa de Claude Code CLI*
